{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "akam-proxy Configuration",
  "description": "Configuration schema for akam-proxy server",
  "type": "object",
  "required": ["host", "port", "refreshInterval"],
  "properties": {
    "host": {
      "type": "string",
      "description": "Target CDN hostname",
      "pattern": "^[a-z0-9.-]+$",
      "default": "upos-hz-mirrorakam.akamaized.net"
    },
    "port": {
      "type": "integer",
      "description": "Proxy server port",
      "minimum": 1,
      "maximum": 65535,
      "default": 2689
    },
    "refreshInterval": {
      "type": "integer",
      "description": "Interval to re-test IPs (seconds)",
      "minimum": 60,
      "default": 3600
    },
    "akamTester": {
      "type": "object",
      "description": "akamTester automatic IP discovery configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable automatic IP discovery",
          "default": false
        },
        "interval": {
          "type": "integer",
          "description": "Run akamTester every X seconds",
          "minimum": 300,
          "default": 900
        },
        "pythonPath": {
          "type": "string",
          "description": "Path to Python executable",
          "default": "python"
        },
        "condaEnv": {
          "type": ["string", "null"],
          "description": "Conda environment name (optional)",
          "default": null
        },
        "scriptPath": {
          "type": "string",
          "description": "Path to akamTester.py script",
          "default": "tools/akamTester/akamTester.py"
        },
        "targetHosts": {
          "type": "array",
          "description": "List of target hosts to discover IPs for",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9.-]+$"
          },
          "minItems": 1,
          "default": ["upos-hz-mirrorakam.akamaized.net"]
        },
        "saveToFile": {
          "type": "boolean",
          "description": "Save discovered IPs to file",
          "default": true
        },
        "timeout": {
          "type": "integer",
          "description": "Maximum execution time (milliseconds)",
          "minimum": 60000,
          "maximum": 1800000,
          "default": 600000
        },
        "maxIps": {
          "type": "integer",
          "description": "Maximum number of IPs to keep",
          "minimum": 10,
          "maximum": 1000,
          "default": 200
        }
      }
    }
  }
}
